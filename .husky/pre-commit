echo "ğŸ” Running pre-commit checks..."

# Check TypeScript syntax
echo "Checking TypeScript..."
npx tsc --noEmit --skipLibCheck || {
  echo "âŒ TypeScript check failed"
  exit 1
}

# Check Python syntax
echo "Checking Python syntax..."
python -m py_compile web-gui/server.py || {
  echo "âŒ Python syntax check failed"
  exit 1
}

# Check for common issues
echo "Checking for common issues..."
if git diff --cached --name-only | grep -q "\.json$"; then
  echo "Validating JSON files..."
  git diff --cached --name-only | grep "\.json$" | while read file; do
    python -m json.tool "$file" > /dev/null || {
      echo "âŒ Invalid JSON: $file"
      exit 1
    }
  done
fi

echo "âœ… Pre-commit checks passed"
