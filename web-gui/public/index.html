<!doctype html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <!-- Primary Meta Tags -->
        <title>Raspberry Pi Manager - Device Management System</title>
        <meta name="title" content="Raspberry Pi Manager - Device Management System" />
        <meta
            name="description"
            content="Comprehensive web-based management system for Raspberry Pi devices. Configure, monitor, and manage multiple Raspberry Pi devices from a single interface."
        />
        <meta
            name="keywords"
            content="Raspberry Pi, Pi Manager, Device Management, IoT, Raspberry Pi Configuration, SD Card Management, OS Installation"
        />
        <meta name="author" content="Raspberry Pi Manager" />
        <meta name="robots" content="index, follow" />
        <meta name="language" content="English" />
        <meta name="revisit-after" content="7 days" />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta property="og:title" content="Raspberry Pi Manager" />
        <meta property="og:description" content="Comprehensive web-based management system for Raspberry Pi devices" />
        <meta property="og:site_name" content="Raspberry Pi Manager" />

        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="Raspberry Pi Manager" />
        <meta name="twitter:description" content="Comprehensive web-based management system for Raspberry Pi devices" />

        <!-- Theme and Color -->
        <meta name="theme-color" content="#0078D4" />
        <meta name="color-scheme" content="light dark" />
        <meta name="msapplication-TileColor" content="#0078D4" />
        <meta name="msapplication-config" content="/browserconfig.xml" />

        <!-- Security Headers -->
        <!-- Note: X-Frame-Options, X-Content-Type-Options, and other security headers are set via HTTP headers in server.py -->
        <meta
            http-equiv="Content-Security-Policy"
            content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' ws: wss:;"
        />
        <meta http-equiv="X-Content-Type-Options" content="nosniff" />
        <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
        <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
        <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />

        <!-- Performance and Resource Hints -->
        <link rel="preconnect" href="https://downloads.raspberrypi.org" crossorigin />
        <link rel="dns-prefetch" href="https://downloads.raspberrypi.org" />
        <link rel="preload" href="styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'" />
        <noscript><link rel="stylesheet" href="styles.css" /></noscript>
        <link rel="preload" href="app.js" as="script" />

        <!-- PWA Support -->
        <link rel="manifest" href="/manifest.json" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <meta name="apple-mobile-web-app-title" content="Pi Manager" />
        <link rel="apple-touch-icon" href="/favicon.svg" />

        <!-- Favicon -->
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
        <link rel="shortcut icon" href="/favicon.ico" />

        <!-- Canonical URL -->
        <link rel="canonical" href="/" />

        <!-- Alternative Languages (if needed) -->
        <link rel="alternate" hreflang="en" href="/" />

        <!-- Prefetch for faster navigation -->
        <link rel="prefetch" href="/api/pis" />

        <!-- Critical CSS inline (if needed for above-the-fold content) -->
        <style>
            /* Critical CSS for initial render */
            body {
                margin: 0;
                padding: 20px;
                font-family: 'Segoe UI', system-ui, sans-serif;
                background: #f3f3f3;
                min-height: 100vh;
            }
            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: #ffffff;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
                overflow: hidden;
            }
            header {
                background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
                color: #fff;
                padding: 32px;
                text-align: center;
            }
            .tabs {
                display: flex;
                background: #ffffff;
                border-bottom: 1px solid #e1e1e1;
                padding: 0 8px;
                position: relative;
                flex-wrap: wrap;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <header>
                <h1>üçì Raspberry Pi Manager</h1>
                <p>Manage your Raspberry Pi devices</p>
            </header>

            <nav class="tabs" aria-label="Main navigation">
                <button
                    type="button"
                    id="mobile-menu-toggle"
                    class="mobile-menu-toggle"
                    aria-label="Toggle menu"
                    aria-expanded="false"
                    aria-controls="tabs-menu"
                >
                    <span class="hamburger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                </button>
                <div class="tabs-container" id="tabs-menu" role="tablist">
                    <button
                        type="button"
                        class="tab-button active"
                        data-tab="dashboard"
                        role="tab"
                        aria-selected="true"
                        aria-controls="dashboard"
                        id="tab-dashboard"
                    >
                        Dashboard
                    </button>
                    <button
                        type="button"
                        class="tab-button"
                        data-tab="pis"
                        role="tab"
                        aria-selected="false"
                        aria-controls="pis"
                        id="tab-pis"
                    >
                        Raspberry Pis
                    </button>
                    <button
                        type="button"
                        class="tab-button"
                        data-tab="sdcard"
                        role="tab"
                        aria-selected="false"
                        aria-controls="sdcard"
                        id="tab-sdcard"
                    >
                        SD Card
                    </button>
                    <button
                        type="button"
                        class="tab-button"
                        data-tab="osinstall"
                        role="tab"
                        aria-selected="false"
                        aria-controls="osinstall"
                        id="tab-osinstall"
                    >
                        OS Install
                    </button>
                    <button
                        type="button"
                        class="tab-button"
                        data-tab="settings"
                        role="tab"
                        aria-selected="false"
                        aria-controls="settings"
                        id="tab-settings"
                    >
                        Settings
                    </button>
                    <button
                        type="button"
                        class="tab-button"
                        data-tab="connections"
                        role="tab"
                        aria-selected="false"
                        aria-controls="connections"
                        id="tab-connections"
                    >
                        Test Connections
                    </button>
                    <button
                        type="button"
                        class="tab-button"
                        data-tab="remote"
                        role="tab"
                        aria-selected="false"
                        aria-controls="remote"
                        id="tab-remote"
                    >
                        Remote Connection
                    </button>
                </div>
            </nav>

            <main>
                <!-- Dashboard Tab -->
                <div
                    id="dashboard"
                    class="tab-content active"
                    role="tabpanel"
                    aria-labelledby="tab-dashboard"
                    aria-hidden="false"
                >
                    <h2>Dashboard</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Total Pis</h3>
                            <p class="stat-value" id="total-pis">-</p>
                            <p class="stat-subtitle">Physical devices</p>
                        </div>
                        <div class="stat-card">
                            <h3>Ethernet</h3>
                            <p class="stat-value" id="ethernet-count">-</p>
                            <p class="stat-subtitle">Connections</p>
                        </div>
                        <div class="stat-card">
                            <h3>WiFi</h3>
                            <p class="stat-value" id="wifi-count">-</p>
                            <p class="stat-subtitle">Connections</p>
                        </div>
                        <div class="stat-card">
                            <h3>Status</h3>
                            <p class="stat-value" id="status">Ready</p>
                        </div>
                    </div>
                    <button type="button" id="refresh-dashboard" class="btn btn-primary">Refresh</button>
                </div>

                <!-- Raspberry Pis Tab -->
                <div id="pis" class="tab-content" role="tabpanel" aria-labelledby="tab-pis" aria-hidden="true">
                    <h2>Raspberry Pi Devices</h2>
                    <div
                        id="pi-list"
                        class="pi-list"
                        role="region"
                        aria-label="Raspberry Pi Device List"
                        aria-live="polite"
                        aria-atomic="true"
                    >
                        <p class="loading">Loading Raspberry Pis...</p>
                    </div>
                    <button type="button" id="refresh-pis" class="btn btn-primary">Refresh List</button>
                </div>

                <!-- SD Card Management Tab -->
                <div id="sdcard" class="tab-content" role="tabpanel" aria-labelledby="tab-sdcard" aria-hidden="true">
                    <h2>SD Card Management</h2>
                    <div class="test-section">
                        <h3>Detected SD Cards</h3>
                        <div class="button-group">
                            <button type="button" id="refresh-sdcards" class="btn btn-primary">Refresh SD Cards</button>
                            <button type="button" id="toggle-auto-detect" class="btn btn-secondary btn-relative">
                                <span id="auto-detect-text">Enable Auto-Detection</span>
                                <span id="auto-detect-indicator" class="auto-detect-indicator">üîç</span>
                            </button>
                            <span id="auto-detect-status" class="auto-detect-status"></span>
                        </div>
                        <div
                            id="sdcard-list"
                            class="pi-list"
                            role="region"
                            aria-label="SD Card List"
                            aria-live="polite"
                            aria-atomic="true"
                        >
                            <p class="loading">Click "Refresh SD Cards" to detect connected SD cards</p>
                        </div>
                    </div>
                </div>

                <!-- OS Installation Tab -->
                <div
                    id="osinstall"
                    class="tab-content"
                    role="tabpanel"
                    aria-labelledby="tab-osinstall"
                    aria-hidden="true"
                >
                    <h2>OS Installation</h2>

                    <!-- Form 1: SD Card and OS Image Selection -->
                    <form
                        id="os-selection-form"
                        onsubmit="event.preventDefault(); return false;"
                        class="test-section"
                        novalidate
                    >
                        <h3>Select SD Card</h3>
                        <select id="os-sdcard-select" aria-label="Select SD Card" class="select-full-width">
                            <option value="">-- Select SD Card --</option>
                        </select>

                        <h3>Select OS Image</h3>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="os-source" value="download" checked /> Download OS Image </label
                            ><br />
                            <label>
                                <input type="radio" name="os-source" value="custom" /> Use Custom Image File
                            </label>
                        </div>

                        <div id="os-download-section">
                            <select id="os-version-select" aria-label="Select OS Image" class="select-full-width">
                                <optgroup label="Raspberry Pi OS - Official (32-bit)">
                                    <option
                                        value="raspios_lite_armhf"
                                        data-url="https://downloads.raspberrypi.org/raspios_lite_armhf/images/raspios_lite_armhf-latest/"
                                        data-desc="Minimal Raspberry Pi OS without desktop environment. Perfect for headless servers, IoT projects, and applications where you don't need a GUI. Uses less resources and boots faster."
                                    >
                                        Raspberry Pi OS Lite (32-bit)
                                    </option>
                                    <option
                                        value="raspios_armhf"
                                        data-url="https://downloads.raspberrypi.org/raspios_armhf/images/raspios_armhf-latest/"
                                        data-desc="Raspberry Pi OS with desktop environment (PIXEL). Ideal for general computing, programming, web browsing, and educational use. Includes essential software but not all recommended packages."
                                    >
                                        Raspberry Pi OS with Desktop (32-bit)
                                    </option>
                                    <option
                                        value="raspios_full_armhf"
                                        data-url="https://downloads.raspberrypi.org/raspios_full_armhf/images/raspios_full_armhf-latest/"
                                        data-desc="Full Raspberry Pi OS with desktop and all recommended software pre-installed. Best for beginners who want everything ready to use, including office suite, programming tools, and educational software."
                                    >
                                        Raspberry Pi OS Full (32-bit)
                                    </option>
                                </optgroup>
                                <optgroup label="Raspberry Pi OS - Official (64-bit)">
                                    <option
                                        value="raspios_lite_arm64"
                                        data-url="https://downloads.raspberrypi.org/raspios_lite_arm64/images/raspios_lite_arm64-latest/"
                                        data-desc="64-bit minimal Raspberry Pi OS without desktop. Better performance on Pi 4/5, supports more RAM, and runs 64-bit applications. Perfect for servers and headless projects."
                                    >
                                        Raspberry Pi OS Lite (64-bit)
                                    </option>
                                    <option
                                        value="raspios_arm64"
                                        data-url="https://downloads.raspberrypi.org/raspios_arm64/images/raspios_arm64-latest/"
                                        data-desc="64-bit Raspberry Pi OS with desktop environment. Takes advantage of 64-bit architecture for better performance on Pi 4/5. Ideal for modern applications and development."
                                    >
                                        Raspberry Pi OS with Desktop (64-bit)
                                    </option>
                                    <option
                                        value="raspios_full_arm64"
                                        data-url="https://downloads.raspberrypi.org/raspios_full_arm64/images/raspios_full_arm64-latest/"
                                        data-desc="Complete 64-bit Raspberry Pi OS with all software pre-installed. Best performance and compatibility for Pi 4/5 with full software suite ready to use."
                                    >
                                        Raspberry Pi OS Full (64-bit)
                                    </option>
                                </optgroup>
                                <optgroup label="Ubuntu - Official">
                                    <option
                                        value="ubuntu_server_24.04"
                                        data-url="https://cdimage.ubuntu.com/releases/24.04/release/ubuntu-24.04-preinstalled-server-arm64+raspi.img.xz"
                                        data-desc="Ubuntu Server 24.04 LTS - Enterprise-grade server OS with long-term support. Perfect for web servers, databases, containers, and cloud applications. Includes latest packages and security updates."
                                    >
                                        Ubuntu Server 24.04 LTS (64-bit)
                                    </option>
                                    <option
                                        value="ubuntu_server_22.04"
                                        data-url="https://cdimage.ubuntu.com/releases/22.04/release/ubuntu-22.04-preinstalled-server-arm64+raspi.img.xz"
                                        data-desc="Ubuntu Server 22.04 LTS - Stable server OS with proven reliability. Ideal for production environments, Docker hosts, and enterprise deployments requiring stability."
                                    >
                                        Ubuntu Server 22.04 LTS (64-bit)
                                    </option>
                                    <option
                                        value="ubuntu_desktop_24.04"
                                        data-url="https://cdimage.ubuntu.com/releases/24.04/release/ubuntu-24.04-preinstalled-desktop-arm64+raspi.img.xz"
                                        data-desc="Ubuntu Desktop 24.04 LTS - Full desktop environment with GNOME. Great for general computing, development, and users familiar with Ubuntu. Includes office suite and multimedia apps."
                                    >
                                        Ubuntu Desktop 24.04 LTS (64-bit)
                                    </option>
                                    <option
                                        value="ubuntu_desktop_22.04"
                                        data-url="https://cdimage.ubuntu.com/releases/22.04/release/ubuntu-22.04-preinstalled-desktop-arm64+raspi.img.xz"
                                        data-desc="Ubuntu Desktop 22.04 LTS - Stable desktop OS with long-term support. Perfect for users who need a reliable, well-supported desktop environment."
                                    >
                                        Ubuntu Desktop 22.04 LTS (64-bit)
                                    </option>
                                    <option
                                        value="ubuntu_core_24"
                                        data-url="https://cdimage.ubuntu.com/ubuntu-core/24/stable/current/ubuntu-core-24-arm64+raspi.img.xz"
                                        data-desc="Ubuntu Core 24 - Minimal, transactional OS designed for IoT and embedded devices. Features atomic updates, snap packages, and enhanced security. Ideal for production IoT deployments."
                                    >
                                        Ubuntu Core 24 (64-bit)
                                    </option>
                                </optgroup>
                                <optgroup label="Debian - Official">
                                    <option
                                        value="debian_bookworm_arm64"
                                        data-url="https://raspi.debian.net/tested-images/current/arm64/images/debian-12.7.0-arm64-netinst.img.xz"
                                        data-desc="Debian 12 (Bookworm) - Pure Debian for Raspberry Pi. Minimal netinstall image - you choose what to install. Perfect for users who want full control and a clean Debian experience without Raspberry Pi-specific modifications."
                                    >
                                        Debian 12 (Bookworm) - Netinst (64-bit)
                                    </option>
                                    <option
                                        value="debian_bullseye_arm64"
                                        data-url="https://raspi.debian.net/tested-images/current/arm64/images/debian-11.9.0-arm64-netinst.img.xz"
                                        data-desc="Debian 11 (Bullseye) - Stable Debian release. Netinstall allows you to build a custom system from scratch. Ideal for advanced users who want a minimal base and prefer to install only what they need."
                                    >
                                        Debian 11 (Bullseye) - Netinst (64-bit)
                                    </option>
                                </optgroup>
                                <optgroup label="Specialized OS - Media Center">
                                    <option
                                        value="libreelec_rpi4"
                                        data-url="https://releases.libreelec.tv/LibreELEC-RPi4.arm-12.0.0.img.gz"
                                        data-desc="LibreELEC 12.0 - Lightweight Kodi media center OS. Boots directly into Kodi for the ultimate media center experience. Perfect for streaming movies, TV shows, music, and photos. Minimal overhead, maximum performance."
                                    >
                                        LibreELEC 12.0 (Raspberry Pi 4/400)
                                    </option>
                                    <option
                                        value="libreelec_rpi5"
                                        data-url="https://releases.libreelec.tv/LibreELEC-RPi5.arm-12.0.0.img.gz"
                                        data-desc="LibreELEC 12.0 for Pi 5 - Optimized Kodi media center for Raspberry Pi 5. Takes advantage of Pi 5's improved performance for 4K video playback and faster interface."
                                    >
                                        LibreELEC 12.0 (Raspberry Pi 5)
                                    </option>
                                    <option
                                        value="osmc_rpi4"
                                        data-url="https://download.osmc.tv/installers/diskimages/OSMC_TGT_rbp4_20240101.img.gz"
                                        data-desc="OSMC (Open Source Media Center) - Full-featured Kodi-based media center with additional tools and customization. Includes package manager, SSH access, and easy addon installation. Great for advanced media center users."
                                    >
                                        OSMC (Raspberry Pi 4)
                                    </option>
                                    <option
                                        value="volumio_rpi"
                                        data-url="https://updates.volumio.org/pi/volumio/3.0/volumio-3.0.0-2024-01-01-pi.img.zip"
                                        data-desc="Volumio 3.0 - High-fidelity music player OS. Transforms your Pi into a premium audio streaming device. Supports Spotify, Tidal, Qobuz, and local music libraries. Perfect for audiophiles and music enthusiasts."
                                    >
                                        Volumio 3.0
                                    </option>
                                </optgroup>
                                <optgroup label="Specialized OS - Gaming">
                                    <option
                                        value="retropie_rpi4"
                                        data-url="https://github.com/RetroPie/RetroPie-Setup/releases/download/4.9/retropie-buster-4.9-rpi4_400.img.gz"
                                        data-desc="RetroPie 4.9 - Comprehensive retro gaming platform. Emulates thousands of classic games from arcade, console, and computer systems. Highly customizable with extensive emulator support. Perfect for building your own retro gaming console."
                                    >
                                        RetroPie 4.9 (Raspberry Pi 4)
                                    </option>
                                    <option
                                        value="recalbox_rpi4"
                                        data-url="https://download.recalbox.com/recalbox-rpi4-9.2.1.img.gz"
                                        data-desc="Recalbox 9.2.1 - User-friendly retro gaming OS with beautiful interface. Supports 50+ gaming systems with automatic controller configuration. Great for beginners who want a plug-and-play retro gaming experience."
                                    >
                                        Recalbox 9.2.1 (Raspberry Pi 4)
                                    </option>
                                    <option
                                        value="batocera_rpi4"
                                        data-url="https://updates.batocera.org/rpi4/stable/last/batocera-rpi4-39.img.gz"
                                        data-desc="Batocera Linux - Modern retro gaming distribution with sleek interface. Features automatic game scraping, beautiful themes, and support for 100+ gaming systems. Ideal for creating a professional retro gaming setup."
                                    >
                                        Batocera Linux (Raspberry Pi 4)
                                    </option>
                                </optgroup>
                                <optgroup label="Specialized OS - Home Automation">
                                    <option
                                        value="homeassistant_rpi4"
                                        data-url="https://github.com/home-assistant/operating-system/releases/download/12.0/haos_rpi4-64-12.0.img.xz"
                                        data-desc="Home Assistant OS 12.0 - Complete smart home automation platform. Integrates with 1000+ devices and services. Features powerful automation engine, beautiful dashboard, and local-first privacy. Perfect for controlling your entire smart home."
                                    >
                                        Home Assistant OS 12.0 (Raspberry Pi 4)
                                    </option>
                                    <option
                                        value="homeassistant_rpi5"
                                        data-url="https://github.com/home-assistant/operating-system/releases/download/12.0/haos_rpi5-64-12.0.img.xz"
                                        data-desc="Home Assistant OS 12.0 for Pi 5 - Optimized for Raspberry Pi 5's improved performance. Handles larger smart home setups with faster response times and better database performance."
                                    >
                                        Home Assistant OS 12.0 (Raspberry Pi 5)
                                    </option>
                                    <option
                                        value="openhabian_rpi"
                                        data-url="https://github.com/openhab/openhabian/releases/download/v1.9/openhabianpi-rpi-1.9.img.xz"
                                        data-desc="openHABian 1.9 - Easy-to-install openHAB home automation system. Pre-configured with openHAB, InfluxDB, Grafana, and other tools. Great for users who prefer Java-based automation platform with extensive rule engine."
                                    >
                                        openHABian 1.9
                                    </option>
                                </optgroup>
                                <optgroup label="Specialized OS - 3D Printing">
                                    <option
                                        value="octopi_rpi"
                                        data-url="https://github.com/OctoPrint/OctoPi/releases/download/0.19.0/octopi-0.19.0.zip"
                                        data-desc="OctoPi 0.19.0 - Complete 3D printer management system with OctoPrint. Monitor and control your 3D printer remotely via web interface. Includes timelapse recording, plugin support, and mobile apps. Essential for modern 3D printing workflow."
                                    >
                                        OctoPi 0.19.0
                                    </option>
                                    <option
                                        value="klipper_rpi"
                                        data-url="https://github.com/Klipper3d/klipper/releases/download/v0.12.0/klipper-rpi.img.xz"
                                        data-desc="Klipper - Advanced 3D printer firmware that runs on Raspberry Pi. Provides superior print quality through advanced motion planning and pressure advance. Perfect for users who want the best print quality and advanced features."
                                    >
                                        Klipper (Raspberry Pi)
                                    </option>
                                </optgroup>
                                <optgroup label="Specialized OS - Network/Server">
                                    <option
                                        value="openmediavault_rpi"
                                        data-url="https://github.com/openmediavault/openmediavault/releases/download/7.0/openmediavault-rpi-7.0.img.xz"
                                        data-desc="OpenMediaVault 7.0 - Network-attached storage (NAS) solution with web-based management. Perfect for creating a home file server with SMB/CIFS, FTP, NFS, and more. Includes plugin system for extending functionality."
                                    >
                                        OpenMediaVault 7.0
                                    </option>
                                    <option
                                        value="pihole_rpi"
                                        data-url="https://github.com/pi-hole/pi-hole/releases/download/v5.0/pihole-rpi.img.xz"
                                        data-desc="Pi-hole - Network-wide ad blocker and DNS sinkhole. Blocks ads and trackers for all devices on your network without installing software. Features beautiful web interface and detailed statistics. Essential for ad-free browsing."
                                    >
                                        Pi-hole (Network-wide Ad Blocking)
                                    </option>
                                    <option
                                        value="pivpn_rpi"
                                        data-url="https://github.com/pivpn/pivpn/releases/download/v3.0/pivpn-rpi.img.xz"
                                        data-desc="PiVPN - Simple VPN server installer supporting WireGuard and OpenVPN. Easy setup wizard creates secure VPN access to your home network. Perfect for remote access, privacy, and security when using public Wi-Fi."
                                    >
                                        PiVPN (VPN Server)
                                    </option>
                                </optgroup>
                                <optgroup label="Lightweight Linux Distributions">
                                    <option
                                        value="dietpi_rpi"
                                        data-url="https://dietpi.com/downloads/images/DietPi_RPi-ARMv8-Bullseye.img.xz"
                                        data-desc="DietPi - Ultra-lightweight Debian-based OS optimized for single-board computers. Minimal footprint with easy software installation via menu system. Perfect for resource-constrained projects and maximizing performance."
                                    >
                                        DietPi (Lightweight Debian)
                                    </option>
                                    <option
                                        value="alpine_rpi"
                                        data-url="https://dl-cdn.alpinelinux.org/alpine/v3.19/releases/aarch64/alpine-rpi-aarch64-3.19.0.img"
                                        data-desc="Alpine Linux 3.19 - Security-oriented, lightweight Linux distribution using musl libc and BusyBox. Minimal base system (~5MB) perfect for containers, embedded systems, and security-focused applications."
                                    >
                                        Alpine Linux 3.19 (64-bit)
                                    </option>
                                    <option
                                        value="archlinux_arm_rpi"
                                        data-url="https://archlinuxarm.org/os/ArchLinuxARM-rpi-aarch64-latest.tar.gz"
                                        data-desc="Arch Linux ARM - Rolling-release distribution for advanced users. Always up-to-date packages, minimal base installation, and extensive documentation. Perfect for users who want full control and latest software."
                                    >
                                        Arch Linux ARM (64-bit)
                                    </option>
                                </optgroup>
                                <optgroup label="Security & Penetration Testing">
                                    <option
                                        value="kali_rpi"
                                        data-url="https://kali.download/arm-images/kali-2024.1-raspberry-pi-arm64.img.xz"
                                        data-desc="Kali Linux 2024.1 - Advanced penetration testing and security auditing platform. Includes 600+ security tools for ethical hacking, forensics, and security research. Used by security professionals worldwide."
                                    >
                                        Kali Linux 2024.1 (64-bit)
                                    </option>
                                    <option
                                        value="parrot_rpi"
                                        data-url="https://deb.parrot.sh/parrot/iso/5.3/Parrot-security-rpi-aarch64-5.3.iso"
                                        data-desc="Parrot Security OS - Security-focused Linux distribution for penetration testing, computer forensics, reverse engineering, and privacy protection. Features modern interface and comprehensive toolset."
                                    >
                                        Parrot Security OS (64-bit)
                                    </option>
                                </optgroup>
                                <optgroup label="Alternative Operating Systems">
                                    <option
                                        value="risc_os_rpi"
                                        data-url="https://www.riscosopen.org/content/downloads/raspberry-pi"
                                        data-desc="RISC OS - Unique non-Linux operating system originally developed for ARM processors. Fast, lightweight desktop OS with retro computing feel. Interesting for educational purposes and retro computing enthusiasts."
                                    >
                                        RISC OS (Non-Linux)
                                    </option>
                                    <option
                                        value="freebsd_rpi"
                                        data-url="https://download.freebsd.org/ftp/releases/arm64/aarch64/ISO-IMAGES/14.0/FreeBSD-14.0-RELEASE-arm64-aarch64-RPI.img.xz"
                                        data-desc="FreeBSD 14.0 - Advanced Unix-like operating system known for performance, security, and ZFS filesystem. Excellent for servers, networking, and advanced users who prefer BSD over Linux."
                                    >
                                        FreeBSD 14.0 (64-bit)
                                    </option>
                                    <option
                                        value="netbsd_rpi"
                                        data-url="https://cdn.netbsd.org/pub/NetBSD/NetBSD-10.0/evbarm-aarch64/binary/gzimg/NetBSD-10.0-evbarm-aarch64.img.gz"
                                        data-desc="NetBSD 10.0 - Highly portable Unix-like OS with focus on clean design and code quality. Runs on 60+ hardware platforms. Great for embedded systems and portability-focused projects."
                                    >
                                        NetBSD 10.0 (64-bit)
                                    </option>
                                </optgroup>
                                <optgroup label="Development & Learning">
                                    <option
                                        value="scratch_rpi"
                                        data-url="https://downloads.raspberrypi.org/scratch_os/images/scratch_os-latest/"
                                        data-desc="Scratch OS - Educational operating system designed for teaching programming to children. Features Scratch programming environment and educational software. Perfect for schools and learning environments."
                                    >
                                        Scratch OS (Educational)
                                    </option>
                                    <option
                                        value="raspbian_old"
                                        data-url="https://downloads.raspberrypi.org/raspbian/images/raspbian-2019-09-30/"
                                        data-desc="Raspbian (Legacy) - Original Debian-based OS for Raspberry Pi, now superseded by Raspberry Pi OS. Only for compatibility with very old projects. Not recommended for new installations."
                                    >
                                        Raspbian (Legacy - 32-bit only)
                                    </option>
                                </optgroup>
                            </select>
                            <div id="os-description" class="os-description">
                                <p class="os-description-text" id="os-description-text"></p>
                            </div>
                            <p class="os-note">
                                <strong>Note:</strong> Images will be downloaded from official sources. Some images may
                                require manual URL resolution for the latest version.
                            </p>
                        </div>

                        <div id="os-custom-section" class="hidden">
                            <label for="os-custom-file" class="form-label">Custom Image File:</label>
                            <input
                                type="file"
                                id="os-custom-file"
                                accept=".img,.zip"
                                class="file-input-full"
                                aria-label="Select custom OS image file"
                                title="Select custom OS image file"
                            />
                        </div>
                    </form>

                    <!-- Form 2: Configuration Options -->
                    <form
                        id="os-config-form"
                        onsubmit="event.preventDefault(); return false;"
                        class="test-section"
                        novalidate
                    >
                        <h3>Configuration Options</h3>
                        <p class="config-description">Configure the OS before installation</p>

                        <!-- Boot Settings -->
                        <details class="details-section">
                            <summary class="details-summary">Boot Settings</summary>
                            <div class="details-content">
                                <label class="form-label">
                                    <input type="checkbox" id="os-enable-ssh" checked /> Enable SSH
                                </label>
                                <label class="form-label">
                                    <input type="checkbox" id="os-enable-serial" /> Enable Serial Console
                                </label>
                                <label class="form-label">
                                    <input type="checkbox" id="os-disable-overscan" checked /> Disable Overscan
                                </label>
                                <label class="form-label">
                                    GPU Memory (MB):
                                    <input
                                        type="number"
                                        id="os-gpu-memory"
                                        value="64"
                                        min="16"
                                        max="512"
                                        class="form-input-number"
                                        inputmode="numeric"
                                        step="16"
                                        aria-describedby="gpu-memory-hint"
                                    />
                                    <small id="gpu-memory-hint" class="form-hint"
                                        >GPU memory in MB (16-512, typically 64 or 128)</small
                                    >
                                </label>
                            </div>
                        </details>

                        <!-- System Settings -->
                        <details class="details-section">
                            <summary class="details-summary">System Settings</summary>
                            <div class="details-content">
                                <label class="form-label">
                                    Hostname:
                                    <input
                                        type="text"
                                        id="os-hostname"
                                        value="raspberrypi"
                                        class="form-input-full"
                                        autocomplete="off"
                                        inputmode="text"
                                        pattern="[a-zA-Z0-9\-]+"
                                        minlength="1"
                                        maxlength="63"
                                        spellcheck="false"
                                        aria-describedby="hostname-hint"
                                    />
                                    <small id="hostname-hint" class="form-hint"
                                        >Valid hostname characters: letters, numbers, and hyphens (1-63
                                        characters)</small
                                    >
                                </label>
                                <label class="form-label">
                                    Timezone:
                                    <select id="os-timezone" class="form-input-full">
                                        <option value="UTC">UTC</option>
                                        <option value="America/New_York">America/New_York (EST)</option>
                                        <option value="America/Chicago">America/Chicago (CST)</option>
                                        <option value="America/Denver">America/Denver (MST)</option>
                                        <option value="America/Los_Angeles">America/Los_Angeles (PST)</option>
                                        <option value="Europe/London">Europe/London (GMT)</option>
                                        <option value="Europe/Paris">Europe/Paris (CET)</option>
                                        <option value="Asia/Tokyo">Asia/Tokyo (JST)</option>
                                    </select>
                                </label>
                                <label class="form-label">
                                    Locale:
                                    <select id="os-locale" class="form-input-full">
                                        <option value="en_US.UTF-8">English (US)</option>
                                        <option value="en_GB.UTF-8">English (UK)</option>
                                        <option value="fr_FR.UTF-8">French</option>
                                        <option value="de_DE.UTF-8">German</option>
                                        <option value="el_GR.UTF-8">Greek (Greece)</option>
                                        <option value="es_ES.UTF-8">Spanish</option>
                                        <option value="it_IT.UTF-8">Italian</option>
                                        <option value="ja_JP.UTF-8">Japanese</option>
                                    </select>
                                </label>
                                <div class="nested-section">
                                    <label class="form-label-small">Hardware Interfaces:</label>
                                    <label class="form-label-small">
                                        <input type="checkbox" id="os-enable-camera" /> Enable Camera
                                    </label>
                                    <label class="form-label-small">
                                        <input type="checkbox" id="os-enable-spi" /> Enable SPI
                                    </label>
                                    <label class="form-label-small">
                                        <input type="checkbox" id="os-enable-i2c" /> Enable I2C
                                    </label>
                                    <label class="form-label-small">
                                        <input type="checkbox" id="os-enable-serial-hw" /> Enable Serial (Hardware)
                                    </label>
                                </div>
                            </div>
                        </details>

                        <!-- Network Settings -->
                        <details class="details-section">
                            <summary class="details-summary">Network Settings</summary>
                            <div class="details-content">
                                <label class="form-label">
                                    <input type="checkbox" id="os-enable-ethernet" checked /> Enable Ethernet
                                </label>
                                <label class="form-label">
                                    <input type="checkbox" id="os-enable-wifi" /> Enable WiFi
                                </label>
                                <div id="os-wifi-settings" class="hidden nested-section">
                                    <div class="info-box info-box-wifi">
                                        <strong>üí° WiFi Security Information:</strong>
                                        <ul>
                                            <li>
                                                <strong>WPA3-Personal:</strong> Latest 2025 standard with SAE
                                                (Simultaneous Authentication of Equals) - Recommended for new networks
                                            </li>
                                            <li>
                                                <strong>Transition Mode:</strong> Allows WPA2 and WPA3 devices to
                                                connect simultaneously - Best compatibility
                                            </li>
                                            <li>
                                                <strong>Protected Management Frames (PMF):</strong> Automatically
                                                enabled for WPA3 - Protects against deauthentication attacks
                                            </li>
                                        </ul>
                                    </div>

                                    <label class="form-label">
                                        Network Name (SSID):
                                        <div class="flex-row">
                                            <input
                                                type="text"
                                                id="os-wifi-ssid"
                                                class="form-input-full"
                                                placeholder="Your WiFi network name"
                                                aria-describedby="ssid-hint"
                                            />
                                            <button
                                                type="button"
                                                id="os-wifi-scan-button"
                                                class="btn-secondary white-space-nowrap"
                                            >
                                                üîç Scan
                                            </button>
                                        </div>
                                        <small id="ssid-hint" class="form-hint"
                                            >Enter the exact name of your wireless network as it appears on your router,
                                            or scan for available networks</small
                                        >
                                        <div id="os-wifi-scan-results" class="wifi-scan-results">
                                            <div class="wifi-scan-results-header">Available Networks:</div>
                                            <div id="os-wifi-scan-list"></div>
                                        </div>
                                    </label>

                                    <label class="form-label">
                                        Security Type:
                                        <select
                                            id="os-wifi-security"
                                            class="form-input-full"
                                            aria-describedby="security-hint"
                                        >
                                            <option value="WPA3_Personal" selected>
                                                WPA3-Personal (Recommended - 2025 Standard) üîí
                                            </option>
                                            <option value="WPA2_Personal">WPA2-Personal (Legacy Support) ‚ö†Ô∏è</option>
                                            <option value="WPA3_Enterprise">
                                                WPA3-Enterprise (Advanced - Requires Certificates) üîê
                                            </option>
                                            <option value="WPA2_Enterprise">
                                                WPA2-Enterprise (Legacy - Requires Certificates) ‚ö†Ô∏è
                                            </option>
                                            <option value="OWE">
                                                OWE (Opportunistic Wireless Encryption - Encrypted Open) üîìüîí
                                            </option>
                                            <option value="Open">
                                                Open Network (Not Recommended - No Security) üö´
                                            </option>
                                        </select>
                                        <small id="security-hint" class="form-hint">
                                            <strong>WPA3</strong> provides enhanced security with protection against
                                            brute-force attacks, forward secrecy, and stronger encryption. Use WPA2 only
                                            if your router doesn't support WPA3.
                                        </small>
                                    </label>

                                    <div id="os-wifi-password-section">
                                        <label class="form-label" for="os-wifi-password"> Password: </label>
                                        <div class="position-relative">
                                            <input
                                                type="password"
                                                id="os-wifi-password"
                                                autocomplete="new-password"
                                                class="form-input-full"
                                                placeholder="WiFi password (min. 8 characters)"
                                            />
                                            <button
                                                type="button"
                                                id="os-wifi-password-toggle"
                                                class="password-toggle"
                                                aria-label="Show password"
                                            >
                                                üëÅÔ∏è
                                            </button>
                                        </div>
                                        <div id="os-wifi-password-strength" class="password-strength"></div>
                                        <small class="form-hint"
                                            >Use a strong password (8+ characters, mix of letters, numbers,
                                            symbols)</small
                                        >
                                    </div>

                                    <div id="os-wifi-transition-mode" class="form-label">
                                        <label class="flex-row-center">
                                            <input type="checkbox" id="os-wifi-transition" checked />
                                            <span>Enable WPA2/WPA3 Transition Mode</span>
                                        </label>
                                        <small class="form-hint"
                                            >Allows compatibility with older devices while using WPA3 security</small
                                        >
                                    </div>

                                    <div id="os-wifi-advanced-options" class="form-label wifi-advanced-options">
                                        <label class="flex-row-center">
                                            <input type="checkbox" id="os-wifi-hidden" />
                                            <span>Hidden Network</span>
                                        </label>
                                        <small class="form-hint"
                                            >Enable if your network doesn't broadcast its SSID</small
                                        >

                                        <label class="flex-row-center margin-top-12">
                                            <input type="checkbox" id="os-wifi-precomputed-psk" />
                                            <span>Use Pre-computed PSK</span>
                                        </label>
                                        <small class="form-hint"
                                            >Pre-compute PSK for better security (matches wpa_passphrase output)</small
                                        >

                                        <label class="form-label margin-top-12">
                                            Frequency Band Preference:
                                            <select id="os-wifi-band" class="form-input-full">
                                                <option value="">Auto (Both 2.4GHz and 5GHz)</option>
                                                <option value="2.4GHz">2.4GHz Only</option>
                                                <option value="5GHz">5GHz Only</option>
                                            </select>
                                            <small class="form-hint"
                                                >Prefer specific frequency band for this network</small
                                            >
                                        </label>

                                        <label class="form-label margin-top-12">
                                            Network Priority:
                                            <input
                                                type="number"
                                                id="os-wifi-priority"
                                                class="form-input-full"
                                                min="0"
                                                max="100"
                                                value="0"
                                            />
                                            <small class="form-hint"
                                                >Higher priority networks are preferred (0 = default, 1-100 =
                                                priority)</small
                                            >
                                        </label>

                                        <label class="flex-row-center margin-top-12">
                                            <input type="checkbox" id="os-wifi-auto-connect" checked />
                                            <span>Auto-Connect</span>
                                        </label>
                                        <small class="form-hint"
                                            >Automatically connect to this network when in range</small
                                        >

                                        <label class="form-label margin-top-12">
                                            Minimum Signal Strength (dBm):
                                            <input
                                                type="number"
                                                id="os-wifi-min-signal"
                                                class="form-input-full"
                                                min="-100"
                                                max="0"
                                                step="1"
                                                placeholder="-70"
                                            />
                                            <small class="form-hint"
                                                >Only connect if signal is stronger than this value (e.g., -70 dBm).
                                                Leave empty for no threshold.</small
                                            >
                                        </label>

                                        <div id="os-wifi-fast-roaming" class="margin-top-12">
                                            <label class="flex-row-center">
                                                <input type="checkbox" id="os-wifi-enable-fast-roaming" />
                                                <span>Enable 802.11r Fast Roaming</span>
                                            </label>
                                            <small class="form-hint"
                                                >Enable fast handoff between access points (requires AP support)</small
                                            >

                                            <div id="os-wifi-fast-roaming-options" class="wifi-sub-options">
                                                <label class="form-label margin-top-8">
                                                    Mobility Domain ID:
                                                    <input
                                                        type="number"
                                                        id="os-wifi-mobility-domain"
                                                        class="form-input-full"
                                                        min="1"
                                                        max="65535"
                                                        value="1234"
                                                    />
                                                    <small class="form-hint"
                                                        >Mobility domain identifier (1-65535)</small
                                                    >
                                                </label>

                                                <label class="flex-row-center margin-top-8">
                                                    <input type="checkbox" id="os-wifi-ft-psk" />
                                                    <span>Use FT-PSK (for Personal networks)</span>
                                                </label>

                                                <label class="flex-row-center margin-top-8">
                                                    <input type="checkbox" id="os-wifi-ft-eap" />
                                                    <span>Use FT-EAP (for Enterprise networks)</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div id="os-wifi-rrm" class="margin-top-12">
                                            <label class="flex-row-center">
                                                <input type="checkbox" id="os-wifi-enable-rrm" />
                                                <span>Enable 802.11k (Radio Resource Management)</span>
                                            </label>
                                            <small class="form-hint"
                                                >Helps devices find better access points and optimize roaming</small
                                            >

                                            <div id="os-wifi-rrm-options" class="wifi-sub-options">
                                                <label class="flex-row-center">
                                                    <input type="checkbox" id="os-wifi-rrm-neighbor-report" />
                                                    <span>Enable Neighbor Report Requests</span>
                                                </label>
                                                <small class="form-hint"
                                                    >Request neighbor reports from access points for better roaming
                                                    decisions</small
                                                >
                                            </div>
                                        </div>

                                        <div id="os-wifi-wnm" class="margin-top-12">
                                            <label class="flex-row-center">
                                                <input type="checkbox" id="os-wifi-enable-wnm" />
                                                <span>Enable 802.11v (Wireless Network Management)</span>
                                            </label>
                                            <small class="form-hint"
                                                >Network-assisted power savings and better network management</small
                                            >

                                            <div id="os-wifi-wnm-options" class="wifi-sub-options">
                                                <label class="flex-row-center">
                                                    <input type="checkbox" id="os-wifi-bss-transition" />
                                                    <span>Enable BSS Transition Management</span>
                                                </label>
                                                <small class="form-hint"
                                                    >Allow access points to suggest better connections</small
                                                >

                                                <label class="flex-row-center margin-top-8">
                                                    <input type="checkbox" id="os-wifi-wnm-sleep-mode" />
                                                    <span>Enable WNM Sleep Mode</span>
                                                </label>
                                                <small class="form-hint"
                                                    >Enable power-saving sleep mode for battery-powered devices</small
                                                >
                                            </div>
                                        </div>

                                        <div id="os-wifi-timeout" class="margin-top-12">
                                            <h4 class="margin-bottom-8 font-size-normal">
                                                Connection Timeout Settings
                                            </h4>
                                            <label class="form-label">
                                                Connection Timeout (seconds):
                                                <input
                                                    type="number"
                                                    id="os-wifi-connection-timeout"
                                                    class="form-input-full"
                                                    min="5"
                                                    max="300"
                                                    step="1"
                                                    placeholder="30"
                                                />
                                                <small class="form-hint"
                                                    >Timeout for connection attempts (5-300 seconds). Leave empty for
                                                    default.</small
                                                >
                                            </label>
                                            <label class="form-label margin-top-8">
                                                Maximum Retries:
                                                <input
                                                    type="number"
                                                    id="os-wifi-max-retries"
                                                    class="form-input-full"
                                                    min="1"
                                                    max="10"
                                                    step="1"
                                                    placeholder="3"
                                                />
                                                <small class="form-hint"
                                                    >Maximum number of connection retry attempts (1-10). Leave empty for
                                                    default.</small
                                                >
                                            </label>
                                        </div>

                                        <div id="os-wifi-guest" class="margin-top-12">
                                            <label class="flex-row-center">
                                                <input type="checkbox" id="os-wifi-is-guest-network" />
                                                <span>Guest Network</span>
                                            </label>
                                            <small class="form-hint"
                                                >Mark this as a guest network (enables client isolation)</small
                                            >

                                            <div id="os-wifi-guest-options" class="wifi-sub-options">
                                                <label class="flex-row-center">
                                                    <input type="checkbox" id="os-wifi-enable-isolation" />
                                                    <span>Enable Client Isolation</span>
                                                </label>
                                                <small class="form-hint"
                                                    >Prevent devices on this network from communicating with each
                                                    other</small
                                                >

                                                <label class="form-label margin-top-8">
                                                    VLAN ID (Optional):
                                                    <input
                                                        type="number"
                                                        id="os-wifi-vlan-id"
                                                        class="form-input-full"
                                                        min="1"
                                                        max="4094"
                                                        step="1"
                                                        placeholder="100"
                                                    />
                                                    <small class="form-hint"
                                                        >VLAN ID for network segmentation (1-4094). Requires AP
                                                        support.</small
                                                    >
                                                </label>
                                            </div>
                                        </div>

                                        <div id="os-wifi-mac-filtering" class="margin-top-12">
                                            <label class="flex-row-center">
                                                <input type="checkbox" id="os-wifi-enable-mac-filtering" />
                                                <span>Enable MAC Address Filtering</span>
                                            </label>
                                            <small class="form-hint"
                                                >Note: MAC filtering is typically configured at the AP/router
                                                level</small
                                            >

                                            <div id="os-wifi-mac-filtering-options" class="wifi-sub-options">
                                                <label class="form-label">
                                                    Allowed MAC Addresses (one per line):
                                                    <textarea
                                                        id="os-wifi-allowed-macs"
                                                        rows="3"
                                                        class="form-textarea-small"
                                                        placeholder="AA:BB:CC:DD:EE:FF&#10;11:22:33:44:55:66"
                                                    ></textarea>
                                                    <small class="form-hint"
                                                        >Whitelist of allowed MAC addresses (format:
                                                        XX:XX:XX:XX:XX:XX)</small
                                                    >
                                                </label>
                                                <label class="form-label margin-top-8">
                                                    Blocked MAC Addresses (one per line):
                                                    <textarea
                                                        id="os-wifi-blocked-macs"
                                                        rows="3"
                                                        class="form-textarea-small"
                                                        placeholder="AA:BB:CC:DD:EE:FF&#10;11:22:33:44:55:66"
                                                    ></textarea>
                                                    <small class="form-hint"
                                                        >Blacklist of blocked MAC addresses (format:
                                                        XX:XX:XX:XX:XX:XX)</small
                                                    >
                                                </label>
                                            </div>
                                        </div>

                                        <div id="os-wifi-hotspot20" class="margin-top-12">
                                            <label class="flex-row-center">
                                                <input type="checkbox" id="os-wifi-enable-hotspot20" />
                                                <span>Enable Hotspot 2.0 / Passpoint</span>
                                            </label>
                                            <small class="form-hint"
                                                >Enterprise-grade seamless roaming and automatic authentication</small
                                            >

                                            <div id="os-wifi-hotspot20-options" class="wifi-sub-options">
                                                <label class="form-label">
                                                    Domain Name:
                                                    <input
                                                        type="text"
                                                        id="os-wifi-domain-name"
                                                        class="form-input-full"
                                                        placeholder="example.com"
                                                    />
                                                    <small class="form-hint"
                                                        >Domain name for Passpoint authentication</small
                                                    >
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="margin-top-12">
                                        <button
                                            type="button"
                                            id="os-wifi-advanced-toggle"
                                            class="btn-secondary font-size-small"
                                        >
                                            Show Advanced Options
                                        </button>
                                    </div>

                                    <div id="os-wifi-enterprise-settings" class="hidden nested-section">
                                        <label class="form-label">
                                            EAP Method:
                                            <select id="os-wifi-eap-method" class="form-input-full">
                                                <option value="TLS">TLS (Transport Layer Security)</option>
                                                <option value="PEAP">PEAP (Protected EAP)</option>
                                                <option value="TTLS">TTLS (Tunneled TLS)</option>
                                                <option value="PWD">PWD (EAP-Password)</option>
                                                <option value="SIM">SIM (EAP-SIM)</option>
                                                <option value="AKA">AKA (EAP-AKA)</option>
                                            </select>
                                            <small class="form-hint"
                                                >Select the EAP method required by your network</small
                                            >
                                        </label>
                                        <label class="form-label">
                                            Identity (Username):
                                            <input
                                                type="text"
                                                id="os-wifi-identity"
                                                class="form-input-full"
                                                placeholder="username@domain.com"
                                            />
                                            <small class="form-hint">Your network username/identity</small>
                                        </label>
                                        <label class="form-label">
                                            Anonymous Identity (Optional):
                                            <input
                                                type="text"
                                                id="os-wifi-anonymous-identity"
                                                class="form-input-full"
                                                placeholder="anonymous@domain.com"
                                            />
                                            <small class="form-hint">Used for initial authentication (optional)</small>
                                        </label>
                                        <label class="form-label">
                                            CA Certificate Path:
                                            <input
                                                type="text"
                                                id="os-wifi-ca-cert"
                                                class="form-input-full"
                                                placeholder="/path/to/ca.pem"
                                            />
                                            <small class="form-hint">Path to CA certificate file</small>
                                        </label>
                                        <label class="form-label">
                                            Client Certificate Path:
                                            <input
                                                type="text"
                                                id="os-wifi-client-cert"
                                                class="form-input-full"
                                                placeholder="/path/to/client.pem"
                                            />
                                            <small class="form-hint"
                                                >Path to client certificate file (for TLS/TTLS)</small
                                            >
                                        </label>
                                        <label class="form-label">
                                            Private Key Path:
                                            <input
                                                type="text"
                                                id="os-wifi-private-key"
                                                class="form-input-full"
                                                placeholder="/path/to/private.key"
                                            />
                                            <small class="form-hint">Path to private key file (for TLS/TTLS)</small>
                                        </label>
                                        <label class="form-label">
                                            Private Key Passphrase:
                                            <input
                                                type="password"
                                                id="os-wifi-private-key-passphrase"
                                                class="form-input-full"
                                                placeholder="Private key passphrase"
                                            />
                                            <small class="form-hint"
                                                >Passphrase for encrypted private key (if applicable)</small
                                            >
                                        </label>
                                        <label class="form-label">
                                            Phase 2 Authentication:
                                            <select id="os-wifi-phase2" class="form-input-full">
                                                <option value="">None</option>
                                                <option value="auth=MSCHAPV2">MSCHAPV2</option>
                                                <option value="auth=PAP">PAP</option>
                                                <option value="auth=CHAP">CHAP</option>
                                                <option value="auth=GTC">GTC</option>
                                            </select>
                                            <small class="form-hint">Inner authentication method (for PEAP/TTLS)</small>
                                        </label>
                                        <label class="form-label">
                                            EAP Password:
                                            <input
                                                type="password"
                                                id="os-wifi-eap-password"
                                                class="form-input-full"
                                                placeholder="EAP password"
                                            />
                                            <small class="form-hint"
                                                >Password for EAP authentication (for PEAP/TTLS/PWD)</small
                                            >
                                        </label>
                                    </div>

                                    <label class="form-label">
                                        Country Code:
                                        <select id="os-wifi-country" class="form-input-full">
                                            <option value="US">United States (US)</option>
                                            <option value="GB">United Kingdom (GB)</option>
                                            <option value="DE">Germany (DE)</option>
                                            <option value="FR">France (FR)</option>
                                            <option value="JP">Japan (JP)</option>
                                            <option value="CA">Canada (CA)</option>
                                            <option value="AU">Australia (AU)</option>
                                            <option value="IT">Italy (IT)</option>
                                            <option value="ES">Spain (ES)</option>
                                            <option value="NL">Netherlands (NL)</option>
                                            <option value="GR">Greece (GR)</option>
                                        </select>
                                        <small class="form-hint">Select your country for regulatory compliance</small>
                                    </label>

                                    <div class="network-profile-section">
                                        <h4 class="network-profile-title">Network Profile Management</h4>
                                        <div class="button-group flex-row-wrap">
                                            <button type="button" id="export-network-profile" class="btn btn-secondary">
                                                üíæ Export Network Profile
                                            </button>
                                            <button type="button" id="import-network-profile" class="btn btn-secondary">
                                                üì• Import Network Profile
                                            </button>
                                        </div>
                                        <small class="form-hint"
                                            >Export or import WiFi network configurations as JSON files</small
                                        >
                                        <input
                                            type="file"
                                            id="import-network-profile-file"
                                            accept=".json"
                                            class="hidden-file-input"
                                        />
                                    </div>
                                </div>
                                <label class="form-label form-label-margin-top">
                                    <input type="checkbox" id="os-use-static-ip" /> Use Static IP
                                </label>
                                <div id="os-static-ip-settings" class="hidden nested-section-large">
                                    <label class="form-label">
                                        IP Address:
                                        <input
                                            type="text"
                                            id="os-static-ip"
                                            placeholder="192.168.1.100"
                                            class="form-input-full"
                                            inputmode="numeric"
                                            pattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
                                            autocomplete="off"
                                            spellcheck="false"
                                            aria-describedby="ip-hint"
                                        />
                                        <small id="ip-hint" class="form-hint"
                                            >IPv4 address format: xxx.xxx.xxx.xxx</small
                                        >
                                    </label>
                                    <label class="form-label">
                                        Gateway:
                                        <input
                                            type="text"
                                            id="os-gateway"
                                            placeholder="192.168.1.1"
                                            class="form-input-full"
                                            inputmode="numeric"
                                            pattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
                                            autocomplete="off"
                                            spellcheck="false"
                                        />
                                    </label>
                                    <label class="form-label">
                                        DNS:
                                        <input
                                            type="text"
                                            id="os-dns"
                                            placeholder="8.8.8.8"
                                            class="form-input-full"
                                            inputmode="numeric"
                                            pattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
                                            autocomplete="off"
                                            spellcheck="false"
                                        />
                                    </label>
                                </div>
                            </div>
                        </details>

                        <!-- User Settings -->
                        <details class="details-section">
                            <summary class="details-summary">User Settings</summary>
                            <div class="details-content">
                                <label class="form-label">
                                    Default Password (for 'pi' user):
                                    <input
                                        type="password"
                                        id="os-default-password"
                                        placeholder="Leave empty for default"
                                        autocomplete="new-password"
                                        class="form-input-full"
                                    />
                                </label>
                                <div id="os-users-list" class="users-section">
                                    <label class="users-label">Additional Users:</label>
                                    <div id="os-users-container"></div>
                                    <button type="button" id="os-add-user" class="btn btn-secondary button-margin-top">
                                        Add User
                                    </button>
                                </div>
                            </div>
                        </details>

                        <!-- SSH Settings -->
                        <details class="details-section">
                            <summary class="details-summary">SSH Settings</summary>
                            <div class="details-content">
                                <label class="form-label">
                                    SSH Port:
                                    <input
                                        type="number"
                                        id="os-ssh-port"
                                        value="22"
                                        min="1"
                                        max="65535"
                                        class="form-input-number"
                                        inputmode="numeric"
                                        aria-describedby="ssh-port-hint"
                                    />
                                    <small id="ssh-port-hint" class="form-hint"
                                        >Valid port range: 1-65535 (default: 22)</small
                                    >
                                </label>
                                <label class="form-label">
                                    <input type="checkbox" id="os-ssh-password-auth" checked /> Enable Password
                                    Authentication
                                </label>
                                <label class="form-label">
                                    <input type="checkbox" id="os-ssh-disable-root" checked /> Disable Root Login
                                </label>
                                <label class="form-label">
                                    SSH Authorized Keys (one per line):
                                    <textarea
                                        id="os-ssh-keys"
                                        rows="3"
                                        placeholder="ssh-rsa AAAAB3NzaC1yc2E..."
                                        class="form-textarea"
                                    ></textarea>
                                </label>
                            </div>
                        </details>

                        <!-- Package Settings -->
                        <details class="details-section">
                            <summary class="details-summary">Package Settings</summary>
                            <div class="details-content">
                                <label class="form-label">
                                    <input type="checkbox" id="os-update-packages" checked /> Update Package List on
                                    First Boot
                                </label>
                                <label class="form-label">
                                    <input type="checkbox" id="os-upgrade-packages" /> Upgrade All Packages on First
                                    Boot
                                </label>
                                <label class="form-label">
                                    Packages to Install (comma-separated):
                                    <input
                                        type="text"
                                        id="os-packages"
                                        placeholder="vim, git, htop, docker"
                                        class="form-input-full"
                                    />
                                </label>
                            </div>
                        </details>

                        <!-- Custom Scripts -->
                        <details class="details-section">
                            <summary class="details-summary">Custom Scripts (Advanced)</summary>
                            <div class="details-content">
                                <label class="form-label">
                                    Pre-Install Scripts (file paths, one per line):
                                    <textarea
                                        id="os-pre-scripts"
                                        rows="2"
                                        placeholder="/path/to/script1.sh"
                                        class="form-textarea-small"
                                    ></textarea>
                                </label>
                                <label class="form-label">
                                    Post-Install Scripts (file paths, one per line):
                                    <textarea
                                        id="os-post-scripts"
                                        rows="2"
                                        placeholder="/path/to/script2.sh"
                                        class="form-textarea-small"
                                    ></textarea>
                                </label>
                                <label class="form-label">
                                    First Boot Scripts (file paths, one per line):
                                    <textarea
                                        id="os-firstboot-scripts"
                                        rows="2"
                                        placeholder="/path/to/script3.sh"
                                        class="form-textarea-small"
                                    ></textarea>
                                </label>
                            </div>
                        </details>
                    </form>

                    <!-- Installation Action Area (not a form, just action buttons) -->
                    <div class="test-section form-actions">
                        <button
                            type="button"
                            id="install-os"
                            class="btn btn-primary install-button"
                            aria-describedby="install-warning"
                            data-action="install-os"
                        >
                            Install OS to SD Card
                        </button>
                        <p id="install-warning" class="sr-only" role="alert">
                            Warning: This will erase all data on the selected SD card. This action cannot be undone.
                        </p>
                        <div id="os-install-progress" class="progress-container">
                            <div class="progress-bar-wrapper">
                                <div id="os-progress-bar" class="progress-bar"></div>
                            </div>
                            <p id="os-status-text" class="status-text"></p>
                        </div>
                    </div>
                </div>

                <!-- Settings/Configuration Tab -->
                <div
                    id="settings"
                    class="tab-content"
                    role="tabpanel"
                    aria-labelledby="tab-settings"
                    aria-hidden="true"
                >
                    <h2>Pi Configuration</h2>
                    <div class="test-section">
                        <h3>Select Pi to Configure</h3>
                        <select
                            id="settings-pi-select"
                            aria-label="Select Pi to Configure"
                            class="select-full-width select-margin-bottom"
                        >
                            <option value="">-- Select Raspberry Pi --</option>
                            <option value="1">Raspberry Pi 1</option>
                            <option value="2">Raspberry Pi 2</option>
                        </select>

                        <form id="settings-form" class="settings-form" onsubmit="event.preventDefault(); return false;">
                            <h3>SSH Settings</h3>
                            <label class="settings-label">
                                <input type="checkbox" id="settings-ssh-enable" checked /> Enable SSH
                            </label>
                            <label class="settings-label">
                                <input type="checkbox" id="settings-ssh-password-auth" checked /> Enable Password
                                Authentication
                            </label>
                            <label class="settings-label">
                                SSH Port:
                                <input
                                    type="number"
                                    id="settings-ssh-port"
                                    value="22"
                                    autocomplete="off"
                                    class="settings-input-number"
                                />
                            </label>

                            <h3>Telnet Settings</h3>
                            <label class="settings-label">
                                <input type="checkbox" id="settings-telnet-enable" /> Enable Telnet
                            </label>
                            <label class="settings-label">
                                Telnet Port:
                                <input
                                    type="number"
                                    id="settings-telnet-port"
                                    value="23"
                                    autocomplete="off"
                                    class="settings-input-number"
                                />
                            </label>

                            <h3>Network Settings</h3>
                            <label class="form-label">
                                Hostname:
                                <input
                                    type="text"
                                    id="settings-hostname"
                                    placeholder="raspberrypi"
                                    autocomplete="off"
                                    class="form-input-full"
                                />
                            </label>
                            <label class="form-label">
                                <input type="checkbox" id="settings-wifi-enable" /> Enable WiFi
                            </label>
                            <div id="settings-wifi-config" class="hidden nested-section">
                                <label class="form-label">
                                    Network Name (SSID):
                                    <input
                                        type="text"
                                        id="settings-wifi-ssid"
                                        autocomplete="off"
                                        class="form-input-full"
                                        placeholder="Your WiFi network name"
                                    />
                                </label>
                                <label class="form-label">
                                    Security Type:
                                    <select id="settings-wifi-security" class="form-input-full">
                                        <option value="WPA3_Personal" selected>
                                            WPA3-Personal (Recommended - 2025 Standard)
                                        </option>
                                        <option value="WPA2_Personal">WPA2-Personal (Legacy Support)</option>
                                        <option value="WPA3_Enterprise">WPA3-Enterprise (Advanced)</option>
                                        <option value="WPA2_Enterprise">WPA2-Enterprise (Legacy)</option>
                                        <option value="Open">Open Network (Not Recommended)</option>
                                    </select>
                                    <small class="form-hint"
                                        >WPA3 provides enhanced security with protection against brute-force
                                        attacks</small
                                    >
                                </label>
                                <label class="form-label">
                                    Password:
                                    <input
                                        type="password"
                                        id="settings-wifi-password"
                                        autocomplete="new-password"
                                        class="form-input-full"
                                        placeholder="WiFi password"
                                    />
                                </label>
                                <label class="form-label">
                                    <input type="checkbox" id="settings-wifi-transition" checked /> Enable WPA2/WPA3
                                    Transition Mode
                                    <small class="form-hint"
                                        >Best compatibility with older devices while using WPA3 security</small
                                    >
                                </label>
                            </div>

                            <button
                                type="submit"
                                id="apply-settings-submit"
                                class="btn btn-primary settings-button sr-only-button"
                                aria-label="Submit settings form"
                            >
                                Apply
                            </button>
                            <button type="button" id="apply-settings" class="btn btn-primary settings-button">
                                Apply Settings to Pi
                            </button>
                            <div id="settings-status" class="settings-status"></div>
                        </form>
                    </div>
                </div>

                <!-- Test Connections Tab -->
                <div
                    id="connections"
                    class="tab-content"
                    role="tabpanel"
                    aria-labelledby="tab-connections"
                    aria-hidden="true"
                >
                    <h2>Test Connections</h2>
                    <div class="test-section">
                        <h3>Test All Connections</h3>
                        <p>Test connectivity to all Raspberry Pis (ping, SSH, telnet)</p>
                        <button type="button" id="test-all" class="btn btn-primary">Test All Connections</button>
                        <div
                            id="test-results"
                            class="test-results"
                            role="log"
                            aria-live="polite"
                            aria-atomic="true"
                            aria-label="Test connection results"
                        ></div>
                    </div>
                    <div class="test-section">
                        <h3>Test SSH Authentication</h3>
                        <label for="pi-select">Select Pi:</label>
                        <select id="pi-select" aria-label="Select Pi for SSH test">
                            <option value="1">Pi 1</option>
                            <option value="2">Pi 2</option>
                        </select>
                        <button type="button" id="test-ssh" class="btn btn-primary">Test SSH Auth</button>
                        <div
                            id="ssh-results"
                            class="test-results"
                            role="log"
                            aria-live="polite"
                            aria-atomic="true"
                            aria-label="SSH authentication test results"
                        ></div>
                    </div>
                </div>

                <!-- Remote Connection Tab -->
                <div id="remote" class="tab-content" role="tabpanel" aria-labelledby="tab-remote" aria-hidden="true">
                    <h2>Remote Connection</h2>
                    <div class="test-section">
                        <h3>Connection Settings</h3>
                        <form id="remote-connection-form" onsubmit="event.preventDefault(); return false;">
                            <div class="remote-form-grid">
                                <div>
                                    <label for="remote-pi-select" class="remote-form-field">Select Pi:</label>
                                    <select id="remote-pi-select" class="remote-input">
                                        <option value="1">Raspberry Pi 1</option>
                                        <option value="2">Raspberry Pi 2</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="remote-connection-type" class="remote-form-field"
                                        >Connection Type:</label
                                    >
                                    <select id="remote-connection-type" class="remote-input">
                                        <option value="ssh">SSH</option>
                                        <option value="telnet">Telnet</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="remote-network-type" class="remote-form-field">Network:</label>
                                    <select id="remote-network-type" class="remote-input">
                                        <option value="auto">Auto (Ethernet preferred)</option>
                                        <option value="ethernet">Ethernet</option>
                                        <option value="wifi">WiFi</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="remote-username" class="remote-form-field">Username:</label>
                                    <input
                                        type="text"
                                        id="remote-username"
                                        value="pi"
                                        autocomplete="username"
                                        class="remote-input"
                                    />
                                </div>
                                <div>
                                    <label for="remote-password" class="remote-form-field">Password (optional):</label>
                                    <input
                                        type="password"
                                        id="remote-password"
                                        placeholder="Leave empty for key auth"
                                        autocomplete="current-password"
                                        class="remote-input"
                                    />
                                </div>
                                <div>
                                    <label for="remote-key-path" class="remote-form-field"
                                        >SSH Key Path (optional):</label
                                    >
                                    <input
                                        type="text"
                                        id="remote-key-path"
                                        placeholder="~/.ssh/id_rsa"
                                        autocomplete="off"
                                        class="remote-input"
                                    />
                                </div>
                            </div>
                            <button
                                type="submit"
                                id="remote-connect-btn-submit"
                                class="btn btn-primary sr-only-button"
                                aria-label="Submit remote connection form"
                            >
                                Connect
                            </button>
                            <button type="button" id="remote-connect-btn" class="btn btn-primary">Connect</button>
                            <div id="remote-connection-status" class="remote-status"></div>
                        </form>
                    </div>

                    <div class="test-section terminal-section">
                        <h3>Command Terminal</h3>
                        <div
                            id="remote-terminal"
                            class="terminal"
                            role="log"
                            aria-live="polite"
                            aria-atomic="false"
                            aria-label="Remote terminal output"
                            tabindex="0"
                        >
                            <div class="terminal-prompt">Remote Terminal - Select Pi and click Connect to start</div>
                        </div>
                        <div class="terminal-input-group">
                            <label for="remote-command-input" class="sr-only">Command Input</label>
                            <input
                                type="text"
                                id="remote-command-input"
                                placeholder="Enter command..."
                                class="terminal-input"
                                aria-label="Enter command to execute"
                                autocomplete="off"
                                spellcheck="false"
                                inputmode="text"
                                aria-describedby="command-hint"
                            />
                            <small id="command-hint" class="sr-only"
                                >Press Enter or click Execute to run the command</small
                            >
                            <button
                                type="button"
                                id="remote-execute-btn"
                                class="btn btn-primary"
                                aria-label="Execute command"
                            >
                                Execute
                            </button>
                            <button
                                type="button"
                                id="remote-clear-btn"
                                class="btn btn-secondary"
                                aria-label="Clear terminal"
                            >
                                Clear
                            </button>
                        </div>
                    </div>

                    <div class="test-section quick-commands">
                        <h3>Quick Commands</h3>
                        <div class="quick-commands-grid">
                            <button type="button" class="btn btn-secondary quick-command-btn" data-command="uname -a">
                                System Info
                            </button>
                            <button type="button" class="btn btn-secondary quick-command-btn" data-command="df -h">
                                Disk Usage
                            </button>
                            <button type="button" class="btn btn-secondary quick-command-btn" data-command="free -h">
                                Memory Info
                            </button>
                            <button type="button" class="btn btn-secondary quick-command-btn" data-command="uptime">
                                Uptime
                            </button>
                            <button type="button" class="btn btn-secondary quick-command-btn" data-command="hostname">
                                Hostname
                            </button>
                            <button type="button" class="btn btn-secondary quick-command-btn" data-command="ifconfig">
                                Network Config
                            </button>
                            <button
                                type="button"
                                class="btn btn-secondary quick-command-btn"
                                data-command="sudo systemctl status ssh"
                            >
                                SSH Status
                            </button>
                            <button
                                type="button"
                                class="btn btn-secondary quick-command-btn"
                                data-command="sudo systemctl status inetd"
                            >
                                Telnet Status
                            </button>
                        </div>
                    </div>
                </div>
            </main>

            <footer role="contentinfo">
                <p>Raspberry Pi Management System</p>
                <p><small>&copy; 2025 Raspberry Pi Manager. All rights reserved.</small></p>
                <nav aria-label="Footer navigation">
                    <ul>
                        <li><a href="#dashboard">Dashboard</a></li>
                        <li><a href="#settings">Settings</a></li>
                    </ul>
                </nav>
            </footer>
        </div>

        <!-- Modern JavaScript Loading with defer for better performance -->
        <script src="button-system.js"></script>
        <script src="app.js" defer></script>

        <!-- Service Worker Registration (PWA) -->
        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker
                        .register('/sw.js')
                        .then((reg) => console.log('Service Worker registered:', reg))
                        .catch((err) => console.log('Service Worker registration failed:', err));
                });
            }

            // Performance monitoring
            if ('PerformanceObserver' in window) {
                const perfObserver = new PerformanceObserver((list) => {
                    for (const entry of list.getEntries()) {
                        if (entry.entryType === 'navigation') {
                            console.log('Page Load Time:', entry.loadEventEnd - entry.fetchStart, 'ms');
                        }
                    }
                });
                perfObserver.observe({ entryTypes: ['navigation', 'resource'] });
            }

            // Web Vitals tracking (Core Web Vitals)
            if (typeof window.webVitals !== 'undefined') {
                window.webVitals.getCLS(console.log);
                window.webVitals.getFID(console.log);
                window.webVitals.getFCP(console.log);
                window.webVitals.getLCP(console.log);
                window.webVitals.getTTFB(console.log);
            }
        </script>
    </body>
</html>
